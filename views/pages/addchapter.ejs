<% title = "Add a chapter for " + novel.title; %>

<%- contentFor('body') %>

<h1 class="text-md-center">Write a new chapter</h1>

<% if (message.length > 0) { %>
  <div class="alert alert-danger"><%= message %></div>
<% } %>

<h4>Novel: <a href="<%= novel.getLink() %>"><%= novel.title %></a></h4>

<form method="post">
  <div class="form-group">
    <label for="chapterTitle">Chapter title</label>
    <input type="text" class="form-control" id="chapterTitle" name="chapterTitle" placeholder="Title for the new chapter" maxlength="80" value="<%= req.body.chapterTitle %>" required>
  </div>
  <div class="form-group">
    <label for="chapterContent">Content</label>
    <textarea class="form-control" name="chapterContent" id="chapterContent" rows="10" placeholder="The place is all yours!" minlength="100" maxlength="50000" required><%= req.body.chapterContent%></textarea>
  </div>
  <% if (!novel.prologue) { %>
  <div class="form-check">
    <label class="form-check-label">
      <input class="form-check-input" type="checkbox" name="options" value="prologue"<%= (req.body.options||"").includes("prologue")? " checked" : ""%>>
      This is the <strong>prologue</strong>, not chapter <%= novel.numChapters+1 %>. <small class="form-text text-muted">You can't change this after posting the chapter, but you may still add a prologue later.</small>
    </label>
  </div>
  <% } %>
  <div class="form-group">
    <label for="authorNote">Author's note</label>
    <textarea class="form-control" name="authorNote" id="authorNote" rows="4" placeholder="Optional, if you have something more to say" maxlength="2000"><%= req.body.authorNote%></textarea>
  </div>
  <button type="submit" class="btn btn-primary">Add chapter</button>
</form>